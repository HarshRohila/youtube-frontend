import{o as t,c as s,i}from"./p-97bd8800.js";import{c as e,d as n}from"./p-d0b56f57.js";import{A as r}from"./p-853b575b.js";const l={now:()=>(l.delegate||Date).now(),delegate:void 0};class h extends e{constructor(t,s){super()}schedule(t,s=0){return this}}const u={setInterval(t,s,...i){const{delegate:e}=u;return(null==e?void 0:e.setInterval)?e.setInterval(t,s,...i):setInterval(t,s,...i)},clearInterval(t){const{delegate:s}=u;return((null==s?void 0:s.clearInterval)||clearInterval)(t)},delegate:void 0};class o extends h{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var i;if(this.closed)return this;this.state=t;const e=this.id,n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,s)),this.pending=!0,this.delay=s,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,s),this}requestAsyncId(t,s,i=0){return u.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,s,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return s;null!=s&&u.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,s);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let i,e=!1;try{this.work(t)}catch(t){e=!0,i=t||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:i}=s;this.work=this.state=this.scheduler=null,this.pending=!1,n(i,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}}class c{constructor(t,s=c.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,i){return new this.schedulerActionCtor(this,t).schedule(i,s)}}c.now=l.now;class a extends c{constructor(t,s=c.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,i){for(;t=s.shift();)t.unsubscribe();throw i}}}const d=new a(o);function f(i,e){return t(((t,n)=>{let r=0;t.subscribe(s(n,(t=>i.call(e,t,r++)&&n.next(t))))}))}function v(i,e=d){return t(((t,n)=>{let r=null,l=null,h=null;const u=()=>{if(r){r.unsubscribe(),r=null;const t=l;l=null,n.next(t)}};function o(){const t=h+i,s=e.now();if(s<t)return r=this.schedule(void 0,t-s),void n.add(r);u()}t.subscribe(s(n,(t=>{l=t,h=e.now(),r||(r=e.schedule(o,i),n.add(r))}),(()=>{u(),n.complete()}),void 0,(()=>{l=r=null})))}))}function p(e,n){return t(((t,r)=>{let l=null,h=0,u=!1;const o=()=>u&&!l&&r.complete();t.subscribe(s(r,(t=>{null==l||l.unsubscribe();let u=0;const c=h++;i(e(t,c)).subscribe(l=s(r,(s=>r.next(n?n(t,s,c,u++):s)),(()=>{l=null,o()})))}),(()=>{u=!0,o()})))}))}class w{constructor(t){this.history=t}showVideoPage(t){this.history.push(r.getPath(`/videos/${t.videoId}`))}}export{o as A,w as R,a,v as d,f,p as s}