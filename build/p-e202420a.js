import{S as t,a as s}from"./p-90d81ce8.js";const e={now:()=>(e.delegate||Date).now(),delegate:void 0};class i extends t{constructor(t,s){super()}schedule(t,s=0){return this}}const r={setInterval(t,s,...e){const{delegate:i}=r;return(null==i?void 0:i.setInterval)?i.setInterval(t,s,...e):setInterval(t,s,...e)},clearInterval(t){const{delegate:s}=r;return((null==s?void 0:s.clearInterval)||clearInterval)(t)},delegate:void 0};class n{constructor(t,s=n.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,e){return new this.schedulerActionCtor(this,t).schedule(e,s)}}n.now=e.now;const h=new class extends n{constructor(t,s=n.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let e;this._active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,e){for(;t=s.shift();)t.unsubscribe();throw e}}}(class extends i{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var e;if(this.closed)return this;this.state=t;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,s)),this.pending=!0,this.delay=s,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(r,this.id,s),this}requestAsyncId(t,s,e=0){return r.setInterval(t.flush.bind(t,this),e)}recycleAsyncId(t,s,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return s;null!=s&&r.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(t,s);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let e,i=!1;try{this.work(t)}catch(t){i=!0,e=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,s(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}),l=h;function c(t){return t instanceof Date&&!isNaN(t)}export{l as a,h as b,c as i}