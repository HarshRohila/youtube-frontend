import{f as n,p as s,o as t,c as o,i as l}from"./p-d991cb74.js";function a(...t){const o=s(t);return n(t,o)}function c(n,s){return t(((t,a)=>{let c=null,r=0,u=!1;const e=()=>u&&!c&&a.complete();t.subscribe(o(a,(t=>{null==c||c.unsubscribe();let u=0;const f=r++;l(n(t,f)).subscribe(c=o(a,(n=>a.next(s?s(t,n,f,u++):n)),(()=>{c=null,e()})))}),(()=>{u=!0,e()})))}))}export{a as o,c as s}