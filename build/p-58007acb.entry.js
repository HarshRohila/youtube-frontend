import{r as t,h as i,H as s}from"./p-27ce4408.js";import{a as o,f as n,b as a,o as e,m as r}from"./p-13637994.js";import{d as l,f as c,a as p,b as m,s as h}from"./p-34852140.js";import{b as d,c as b}from"./p-c1b151ee.js";import{v as u}from"./p-8cb43504.js";import{f}from"./p-c2b68ac1.js";import{o as g,c as k,i as j,m as x}from"./p-14a93dff.js";import{t as v}from"./p-ebb7d3fd.js";import{M as y}from"./p-0b475387.js";import{A as C}from"./p-2d1a0235.js";import"./p-d0239e1a.js";import"./p-b44dc71b.js";import"./p-bc5141d2.js";import"./p-e88f731b.js";import"./p-6cf4a597.js";import"./p-c4fd8842.js";import"./p-4c181b5f.js";function w(t,i=d,s){const o=v(t,i);return function(t,i){return g(((t,s)=>{const{leading:n=!0,trailing:a=!1}=null!=i?i:{};let e=!1,r=null,l=null,c=!1;const p=()=>{null==l||l.unsubscribe(),l=null,a&&(d(),c&&s.complete())},m=()=>{l=null,c&&s.complete()},h=()=>l=j(o).subscribe(k(s,p,m)),d=()=>{if(e){e=!1;const t=r;r=null,s.next(t),!c&&h()}};t.subscribe(k(s,(t=>{e=!0,r=t,(!l||l.closed)&&(n?d():h())}),(()=>{c=!0,(!(a&&e&&l)||l.closed)&&s.complete()})))}))}(0,s)}let L=class{constructor(i){t(this,i),this.commentsList=[],this.component=b(this),this.scrollEvent=u((t=>t.target))}componentWillLoad(){const{component:t}=this;t.subscribe(l.asObservable(),{next:t=>{this.comments!==t.comments&&(this.comments=t.comments,this.commentsList=[...this.commentsList,...t.comments.comments]),this.commentsView=t.commentsView,this.areCommentsLoading=t.areCommentsLoading}})}componentDidLoad(){const t=this.scrollEvent.$.pipe(f((t=>{return i=t,Math.abs(i.scrollHeight-i.scrollTop-i.clientHeight)<1;var i})),w(200),x((()=>Object.assign(Object.assign({},this.commentsView),{nextpage:this.comments.nextpage}))));this.component.justSubscribe(t.pipe(c))}render(){const t=this.commentsList;return i(s,null,i("div",{class:"comments-view"},i("icon-btn",{class:"close-btn",icon:o,onBtnClicked:this.closeCallback}),i("h3",{class:"heading"},"Comments"),i("ul",{onScroll:this.scrollEvent.handler,class:"list"},t.map((t=>i("li",null,i("a-comment",{comment:t,key:t.commentId}))))),this.areCommentsLoading&&i("x-icon",{icon:n,spin:!0})))}};L.style="@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}:host{display:block}.comments-view{position:relative;background-color:#8c5383;height:100%;border-top-left-radius:15px;border-top-right-radius:15px;display:flex;flex-direction:column}.comments-view .close-btn{position:absolute;right:0;top:0;padding:10px}.heading{padding:10px;margin:0}.list{margin:0;list-style-type:none;padding-right:10px;padding-left:10px;padding-bottom:10px;overflow-y:auto}.list li~li{margin-top:10px}";let S=0;const B="share-cb"+ ++S;let z=class{constructor(i){t(this,i),this.handleCopyLink=async t=>{var i;(i=t,navigator.clipboard.writeText(i)).then((()=>{p.update({copiedLink:t})}))},this.handleShare=t=>{navigator.share({url:t,title:this.video.title||"A YouTube Video"})}}componentWillLoad(){b(this).subscribe(p.asObservable(),(t=>{this.copiedLink=t.copiedLink,this.shareForm=t.shareForm,this.currentTimeEnabled=t.currentTimeEnabled}))}render(){let t=C.getCurrentSpaUrl();return this.currentTimeEnabled&&(t+="?t="+this.shareForm.currentTime),i(s,null,i(y,{onClose:()=>m(void 0)},i("form",{class:"share-form",onSubmit:t=>{t.preventDefault()}},i("input",{type:"checkbox",id:B,checked:this.currentTimeEnabled,onClick:()=>{h(!this.currentTimeEnabled)}}),i("label",{htmlFor:B},i("span",null,"Share with Current Time?")),i("p",null,t),i("div",{class:"share-actions"},i("icon-btn",{icon:this.copiedLink?a:e,label:this.copiedLink?"Copied!":"Copy Link",size:"small",onBtnClicked:()=>{this.handleCopyLink(t)}}),!!navigator.share&&i("icon-btn",{icon:r,label:"Share",size:"small",onBtnClicked:()=>{this.handleShare(t)}})))))}};z.style="@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}input[type=checkbox]{position:relative;top:2px}";export{L as comments_view,z as share_form}