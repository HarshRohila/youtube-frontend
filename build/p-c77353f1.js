import{E as t}from"./p-34631501.js";import{a as s,b as e,o as i,c as n,i as r}from"./p-4cff571d.js";const l={prod:{appPath:"/youtube-frontend"},dev:{appPath:""}},h={getPath(s){const{appPath:e}=l[t.apiEnv];return s||(s="/"),e+s}},u={now:()=>(u.delegate||Date).now(),delegate:void 0};class c extends s{constructor(t,s){super()}schedule(t,s=0){return this}}const o={setInterval(t,s,...e){const{delegate:i}=o;return(null==i?void 0:i.setInterval)?i.setInterval(t,s,...e):setInterval(t,s,...e)},clearInterval(t){const{delegate:s}=o;return((null==s?void 0:s.clearInterval)||clearInterval)(t)},delegate:void 0};class a extends c{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var e;if(this.closed)return this;this.state=t;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,s)),this.pending=!0,this.delay=s,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(n,this.id,s),this}requestAsyncId(t,s,e=0){return o.setInterval(t.flush.bind(t,this),e)}recycleAsyncId(t,s,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return s;null!=s&&o.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(t,s);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let e,i=!1;try{this.work(t)}catch(t){i=!0,e=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:i}=s;this.work=this.state=this.scheduler=null,this.pending=!1,e(i,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}}class d{constructor(t,s=d.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,e){return new this.schedulerActionCtor(this,t).schedule(e,s)}}d.now=u.now;class f extends d{constructor(t,s=d.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let e;this._active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,e){for(;t=s.shift();)t.unsubscribe();throw e}}}const p=new f(a);function v(t,s){return i(((e,i)=>{let r=0;e.subscribe(n(i,(e=>t.call(s,e,r++)&&i.next(e))))}))}function w(t,s=p){return i(((e,i)=>{let r=null,l=null,h=null;const u=()=>{if(r){r.unsubscribe(),r=null;const t=l;l=null,i.next(t)}};function c(){const e=h+t,n=s.now();if(n<e)return r=this.schedule(void 0,e-n),void i.add(r);u()}e.subscribe(n(i,(e=>{l=e,h=s.now(),r||(r=s.schedule(c,t),i.add(r))}),(()=>{u(),i.complete()}),void 0,(()=>{l=r=null})))}))}function x(t,s){return i(((e,i)=>{let l=null,h=0,u=!1;const c=()=>u&&!l&&i.complete();e.subscribe(n(i,(e=>{null==l||l.unsubscribe();let u=0;const o=h++;r(t(e,o)).subscribe(l=n(i,(t=>i.next(s?s(e,t,o,u++):t)),(()=>{l=null,c()})))}),(()=>{u=!0,c()})))}))}export{h as A,a,f as b,w as d,v as f,x as s}