import{r as s,h as t,H as i}from"./p-27ce4408.js";import{s as o,d as r,g as a,a as p,S as c,b as e,c as h,k as m}from"./p-fe9cdb4c.js";import{R as n}from"./p-1a687b83.js";import{c as j}from"./p-c1b151ee.js";import{v as d}from"./p-8cb43504.js";import{a as f,m as b}from"./p-701710ba.js";import{t as l}from"./p-c4fd8842.js";import{f as g,p as u}from"./p-e88f731b.js";import{o as k}from"./p-14a93dff.js";import{V as S}from"./p-4325abee.js";import"./p-13637994.js";import"./p-d0239e1a.js";import"./p-b44dc71b.js";import"./p-bc5141d2.js";import"./p-4357c78a.js";import"./p-954d5885.js";import"./p-d53ccd5c.js";import"./p-c2b68ac1.js";import"./p-7e3efe59.js";import"./p-6cf4a597.js";import"./p-fcbaad83.js";import"./p-2d1a0235.js";import"./p-4c181b5f.js";function w(...s){return f(1)(g(s,u(s)))}let C=class{constructor(t){s(this,t),this.searchText="",this.searchSubmitEvent=d((()=>this.searchText)),this.suggestionClickEvent=d(),this.handleBack=()=>{new n(this.history).showTrendingPage()},this.searchTextChangeEvent=d((s=>s.target.value))}componentWillLoad(){const s=this.history.location.query.q,t=j(this);t.subscribe(o.asObservable(),(s=>{this.videos=s.searchResponse.results,this.suggestions=s.suggestions,this.suggestionsError=s.suggestionsError,this.suggestionsLoading=s.suggestionsLoading,this.searchText=s.searchText}));const i=b(this.searchSubmitEvent.$,this.suggestionClickEvent.$).pipe(l((s=>{window.scrollTo({top:0}),new n(this.history).showSearchPage(s,{replace:!0})}))),p=i.pipe(function(...s){const t=u(s);return k(((i,o)=>{(t?w(s,i,t):w(s,i)).subscribe(o)}))}(s),l((s=>{h(s)}))),c=r(p),e=this.searchTextChangeEvent.$.pipe(l((s=>{m(s)})),a(i));t.justSubscribe(c,e)}disconnectedCallback(){p("")}render(){const s=!!this.suggestions.length;return t(i,null,t("header",{class:"search-active"},t(e,{searchText:this.searchText,onCloseClick:()=>p(""),onSearchSubmit:this.searchSubmitEvent.handler,showSearchbar:!0,onSearchTextChange:this.searchTextChangeEvent.handler,onClickBack:this.handleBack})),s&&t(c,{suggestions:this.suggestions,error:this.suggestionsError,loading:this.suggestionsLoading,onClickSuggesion:this.suggestionClickEvent.handler}),this.videos.length&&t(S,{videos:this.videos,isShowingSuggestions:s,onClickVideo:s=>new n(this.history).showVideoPage(s)}))}};C.style=":host{display:block}";export{C as search_page}