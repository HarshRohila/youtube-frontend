import{b as n,O as t}from"./p-6cf4a597.js";import{o as r,c as u,i as e,a as o,r as i,b as f,e as c,f as s,g as a,h as l,j as b,k as h}from"./p-c9444cc0.js";function p(t){return t&&n(t.schedule)}function m(n){return n[n.length-1]}function w(t){return n(m(t))?t.pop():void 0}function d(n){return p(m(n))?n.pop():void 0}function v(n,t){return"number"==typeof m(n)?n.pop():t}function j(n,t,r,u=0,e=!1){const o=t.schedule((function(){r(),e?n.add(this.schedule(null,u)):this.unsubscribe()}),u);if(n.add(o),!e)return o}function y(n,t=0){return r(((r,e)=>{r.subscribe(u(e,(r=>j(e,n,(()=>e.next(r)),t)),(()=>j(e,n,(()=>e.complete()),t)),(r=>j(e,n,(()=>e.error(r)),t))))}))}function g(n,t=0){return r(((r,u)=>{u.add(n.schedule((()=>r.subscribe(u)),t))}))}function k(n,r){if(!n)throw new Error("Iterable cannot be null");return new t((t=>{j(t,r,(()=>{const u=n[Symbol.asyncIterator]();j(t,r,(()=>{u.next().then((n=>{n.done?t.complete():t.next(n.value)}))}),0,!0)}))}))}function x(r,u){return u?function(r,u){if(null!=r){if(f(r))return function(n,t){return e(n).pipe(g(t),y(t))}(r,u);if(c(r))return function(n,r){return new t((t=>{let u=0;return r.schedule((function(){u===n.length?t.complete():(t.next(n[u++]),t.closed||this.schedule())}))}))}(r,u);if(s(r))return function(n,t){return e(n).pipe(g(t),y(t))}(r,u);if(a(r))return k(r,u);if(l(r))return function(r,u){return new t((t=>{let e;return j(t,u,(()=>{e=r[o](),j(t,u,(()=>{let n,r;try{({value:n,done:r}=e.next())}catch(n){return void t.error(n)}r?t.complete():t.next(n)}),0,!0)})),()=>n(null==e?void 0:e.return)&&e.return()}))}(r,u);if(b(r))return function(n,t){return k(i(n),t)}(r,u)}throw h(r)}(r,u):e(r)}function E(...n){return x(n,d(n))}function I(n,t){return r(((r,o)=>{let i=null,f=0,c=!1;const s=()=>c&&!i&&o.complete();r.subscribe(u(o,(r=>{null==i||i.unsubscribe();let c=0;const a=f++;e(n(r,a)).subscribe(i=u(o,(n=>o.next(t?t(r,n,a,c++):n)),(()=>{i=null,s()})))}),(()=>{c=!0,s()})))}))}export{w as a,v as b,j as e,x as f,p as i,E as o,d as p,I as s}