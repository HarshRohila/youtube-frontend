function t(t){return"function"==typeof t}function n(t){const n=t((t=>{Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const r=n((t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map(((t,n)=>`${n+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n}));function i(t,n){if(t){const r=t.indexOf(n);0<=r&&t.splice(r,1)}}class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(const t of i)t.remove(this);else i.remove(this);const{initialTeardown:e}=this;if(t(e))try{e()}catch(t){n=t instanceof r?t.errors:[t]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const t of s)try{u(t)}catch(t){n=null!=n?n:[],t instanceof r?n=[...n,...t.errors]:n.push(t)}}if(n)throw new r(n)}}add(t){var n;if(t&&t!==this)if(this.closed)u(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&i(n,t)}remove(t){const{_finalizers:n}=this;n&&i(n,t),t instanceof e&&t._removeParent(this)}}e.EMPTY=(()=>{const t=new e;return t.closed=!0,t})();const s=e.EMPTY;function o(n){return n instanceof e||n&&"closed"in n&&t(n.remove)&&t(n.add)&&t(n.unsubscribe)}function u(n){t(n)?n():n.unsubscribe()}const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h={setTimeout(t,n,...r){const{delegate:i}=h;return(null==i?void 0:i.setTimeout)?i.setTimeout(t,n,...r):setTimeout(t,n,...r)},clearTimeout(t){const{delegate:n}=h;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function l(t){h.setTimeout((()=>{const{onUnhandledError:n}=c;if(!n)throw t;n(t)}))}function a(){}const f=d("C",void 0,void 0);function d(t,n,r){return{kind:t,value:n,error:r}}function v(t){t()}class y extends e{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o(t)&&t.add(this)):this.destination=E}static create(t,n,r){return new m(t,n,r)}next(t){this.isStopped?x(function(t){return d("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?x(d("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?x(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function p(t,n){return b.call(t,n)}class w{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(t){S(t)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(t){S(t)}else S(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(t){S(t)}}}class m extends y{constructor(n,r,i){let e;if(super(),t(n)||!n)e={next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0};else{let t;this&&c.useDeprecatedNextContext?(t=Object.create(n),t.unsubscribe=()=>this.unsubscribe(),e={next:n.next&&p(n.next,t),error:n.error&&p(n.error,t),complete:n.complete&&p(n.complete,t)}):e=n}this.destination=new w(e)}}function S(t){l(t)}function x(t,n){const{onStoppedNotification:r}=c;r&&h.setTimeout((()=>r(t,n)))}const E={closed:!0,next:a,error:function(t){throw t},complete:a},_="function"==typeof Symbol&&Symbol.observable||"@@observable";function g(t){return t}class P{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new P;return n.source=this,n.operator=t,n}subscribe(n,r,i){const e=(s=n)&&s instanceof y||function(n){return n&&t(n.next)&&t(n.error)&&t(n.complete)}(s)&&o(s)?n:new m(n,r,i);var s;return v((()=>{const{operator:t,source:n}=this;e.add(t?t.call(e,n):n?this._subscribe(e):this._trySubscribe(e))})),e}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=I(n))(((n,r)=>{const i=new m({next:n=>{try{t(n)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n});this.subscribe(i)}))}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[_](){return this}pipe(...t){return(0===(n=t).length?g:1===n.length?n[0]:function(t){return n.reduce(((t,n)=>n(t)),t)})(this);var n}toPromise(t){return new(t=I(t))(((t,n)=>{let r;this.subscribe((t=>r=t),(t=>n(t)),(()=>t(r)))}))}}function I(t){var n;return null!==(n=null!=t?t:c.Promise)&&void 0!==n?n:Promise}function O(n){return r=>{if(function(n){return t(null==n?void 0:n.lift)}(r))return r.lift((function(t){try{return n(t,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function T(t,n,r,i,e){return new A(t,n,r,i,e)}P.create=t=>new P(t);class A extends y{constructor(t,n,r,i,e,s){super(t),this.onFinalize=e,this.shouldUnsubscribe=s,this._next=n?function(r){try{n(r)}catch(n){t.error(n)}}:super._next,this._error=i?function(n){try{i(n)}catch(n){t.error(n)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(n){t.error(n)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}const j=n((t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class $ extends P{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new k(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new j}next(t){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}}))}error(t){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}}))}complete(){v((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:o}=this;return n||r?s:(this.currentObservers=null,o.push(t),new e((()=>{this.currentObservers=null,i(o,t)})))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:i}=this;n?t.error(r):i&&t.complete()}asObservable(){const t=new P;return t.source=this,t}}$.create=(t,n)=>new k(t,n);class k extends ${constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:s}}const U={now:()=>(U.delegate||Date).now(),delegate:void 0};class N extends e{constructor(t,n){super()}schedule(t,n=0){return this}}const z={setInterval(t,n,...r){const{delegate:i}=z;return(null==i?void 0:i.setInterval)?i.setInterval(t,n,...r):setInterval(t,n,...r)},clearInterval(t){const{delegate:n}=z;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0};class C extends N{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,e=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(e,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(e,this.id,n),this}requestAsyncId(t,n,r=0){return z.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&z.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r,i=!1;try{this.work(t)}catch(t){i=!0,r=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,i(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}class D{constructor(t,n=D.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}D.now=U.now;class q extends D{constructor(t,n=D.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const F=new q(C),Y=F;function H(t){return this instanceof H?(this.v=t,this):new H(t)}function R(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=r.apply(t,n||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){e[t]&&(i[t]=function(n){return new Promise((function(r,i){s.push([t,n,r,i])>1||u(t,n)}))})}function u(t,n){try{(r=e[t](n)).value instanceof H?Promise.resolve(r.value.v).then(c,h):l(s[0][2],r)}catch(t){l(s[0][3],t)}var r}function c(t){u("next",t)}function h(t){u("throw",t)}function l(t,n){t(n),s.shift(),s.length&&u(s[0][0],s[0][1])}}function B(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=t[Symbol.asyncIterator];return r?r.call(t):(t=function(t){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&t[n],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(n){return new Promise((function(i,e){!function(t,n,r,i){Promise.resolve(i).then((function(n){t({value:n,done:r})}),n)}(i,e,(n=t[r](n)).done,n.value)}))}}}const G=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function J(n){return t(null==n?void 0:n.then)}function K(n){return t(n[_])}function L(n){return Symbol.asyncIterator&&t(null==n?void 0:n[Symbol.asyncIterator])}function M(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function V(n){return t(null==n?void 0:n[Q])}function W(t){return R(this,arguments,(function*(){const n=t.getReader();try{for(;;){const{value:t,done:r}=yield H(n.read());if(r)return yield H(void 0);yield yield H(t)}}finally{n.releaseLock()}}))}function X(n){return t(null==n?void 0:n.getReader)}function Z(n){if(n instanceof P)return n;if(null!=n){if(K(n))return s=n,new P((n=>{const r=s[_]();if(t(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(G(n))return e=n,new P((t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}));if(J(n))return i=n,new P((t=>{i.then((n=>{t.closed||(t.next(n),t.complete())}),(n=>t.error(n))).then(null,l)}));if(L(n))return tt(n);if(V(n))return r=n,new P((t=>{for(const n of r)if(t.next(n),t.closed)return;t.complete()}));if(X(n))return tt(W(n))}var r,i,e,s;throw M(n)}function tt(t){return new P((n=>{(function(t,n){var r,i,e,s,o,u,c,h;return o=this,u=void 0,h=function*(){try{for(r=B(t);!(i=yield r.next()).done;)if(n.next(i.value),n.closed)return}catch(t){e={error:t}}finally{try{i&&!i.done&&(s=r.return)&&(yield s.call(r))}finally{if(e)throw e.error}}n.complete()},new((c=void 0)||(c=Promise))((function(t,n){function r(t){try{e(h.next(t))}catch(t){n(t)}}function i(t){try{e(h.throw(t))}catch(t){n(t)}}function e(n){var e;n.done?t(n.value):(e=n.value,e instanceof c?e:new c((function(t){t(e)}))).then(r,i)}e((h=h.apply(o,u||[])).next())}))})(t,n).catch((t=>n.error(t)))}))}function nt(t,n){return O(((r,i)=>{let e=0;r.subscribe(T(i,(r=>{i.next(t.call(n,r,e++))})))}))}function rt(t,n){return O(((r,i)=>{let e=0;r.subscribe(T(i,(r=>t.call(n,r,e++)&&i.next(r))))}))}function it(t){return O(((n,r)=>{Z(t).subscribe(T(r,(()=>r.complete()),a)),!r.closed&&n.subscribe(r)}))}export{C as A,P as O,$ as S,q as a,t as b,T as c,Q as d,K as e,G as f,J as g,L as h,Z as i,V as j,X as k,M as l,nt as m,g as n,O as o,rt as p,m as q,W as r,e as s,it as t,F as u,Y as v,a as w}