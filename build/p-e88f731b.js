import{b as n,O as t}from"./p-6cf4a597.js";import{o as r,c as u,i as e,a as o,r as i,b as f,d as s,e as a,f as c,g as l,h as b,j as d}from"./p-14a93dff.js";function h(t){return t&&n(t.schedule)}function p(n){return n[n.length-1]}function m(t){return n(p(t))?t.pop():void 0}function w(n){return h(p(n))?n.pop():void 0}function v(n,t){return"number"==typeof p(n)?n.pop():t}function j(n,t,r,u=0,e=!1){const o=t.schedule((function(){r(),e?n.add(this.schedule(null,u)):this.unsubscribe()}),u);if(n.add(o),!e)return o}function y(n,t=0){return r(((r,e)=>{r.subscribe(u(e,(r=>j(e,n,(()=>e.next(r)),t)),(()=>j(e,n,(()=>e.complete()),t)),(r=>j(e,n,(()=>e.error(r)),t))))}))}function g(n,t=0){return r(((r,u)=>{u.add(n.schedule((()=>r.subscribe(u)),t))}))}function x(n,r){if(!n)throw new Error("Iterable cannot be null");return new t((t=>{j(t,r,(()=>{const u=n[Symbol.asyncIterator]();j(t,r,(()=>{u.next().then((n=>{n.done?t.complete():t.next(n.value)}))}),0,!0)}))}))}function E(r,u){return u?function(r,u){if(null!=r){if(f(r))return function(n,t){return e(n).pipe(g(t),y(t))}(r,u);if(s(r))return function(n,r){return new t((t=>{let u=0;return r.schedule((function(){u===n.length?t.complete():(t.next(n[u++]),t.closed||this.schedule())}))}))}(r,u);if(a(r))return function(n,t){return e(n).pipe(g(t),y(t))}(r,u);if(c(r))return x(r,u);if(l(r))return function(r,u){return new t((t=>{let e;return j(t,u,(()=>{e=r[o](),j(t,u,(()=>{let n,r;try{({value:n,done:r}=e.next())}catch(n){return void t.error(n)}r?t.complete():t.next(n)}),0,!0)})),()=>n(null==e?void 0:e.return)&&e.return()}))}(r,u);if(b(r))return function(n,t){return x(i(n),t)}(r,u)}throw d(r)}(r,u):e(r)}function I(...n){return E(n,w(n))}function O(n,t){return r(((r,o)=>{let i=null,f=0,s=!1;const a=()=>s&&!i&&o.complete();r.subscribe(u(o,(r=>{null==i||i.unsubscribe();let s=0;const c=f++;e(n(r,c)).subscribe(i=u(o,(n=>o.next(t?t(r,n,c,s++):n)),(()=>{i=null,a()})))}),(()=>{s=!0,a()})))}))}export{m as a,v as b,j as e,E as f,h as i,I as o,w as p,O as s}