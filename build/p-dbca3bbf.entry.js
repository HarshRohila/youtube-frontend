import{h as i,r as e,F as s,H as t}from"./p-bb4ef53f.js";import{S as o,Y as a,u as n}from"./p-45b0fa56.js";import{a as r,b as l,n as h,o as c}from"./p-24a7b4f3.js";import{A as d}from"./p-293ffef4.js";import{R as p}from"./p-0971c3eb.js";function u({onHeaderClick:e}){return i("header",null,i("h1",{onClick:e},d))}let f=class{constructor(i){e(this,i),this.disconnected$=new o,this.share=()=>{if(navigator.share){const i=document.location.href;navigator.share({url:i})}else r.dispatch(l({message:"Sharing not supported in your Device for now"}))},this.handleHeaderClick=()=>{new p(this.history).showTrendingPage()}}componentWillLoad(){const i=this.match.params.videoId;r.dispatch(h(!0)),a.getApi().getStream(i).pipe(n(this.disconnected$)).subscribe({next:i=>{this.stream=i,r.dispatch(h(!1))},error:()=>{this.error={message:"Failed to load video. Please try refreshing"},r.dispatch(h(!1))}})}get url(){return this.stream.sources[0].url}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete()}render(){return i(t,null,i("div",{class:"video-page"},i(u,{onHeaderClick:this.handleHeaderClick}),this.stream&&i(s,null,i("video-player",{src:this.url}),i("h3",null,this.stream.title),i("div",{class:"actions"},i("icon-btn",{icon:c,onBtnClicked:this.share,label:"Share"}))),this.error&&i("h3",null,this.error.message)))}};f.style="@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}.video-page{height:100vh}.video-page header{width:100%;display:flex;align-items:center;justify-content:center;position:static}h3{margin:16px}";export{f as video_page}