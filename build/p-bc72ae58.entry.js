import{r as s,h as i,H as t}from"./p-34631501.js";import{V as a,S as h,a as o}from"./p-001cff99.js";import{a as e,d as r,s as c,e as n,t as p,k as l}from"./p-965ddd7c.js";import{R as m}from"./p-20caa613.js";import{S as d,m as g,t as S}from"./p-498ca91a.js";import"./p-977e7983.js";import"./p-6cc58472.js";let k=class{constructor(i){s(this,i),this.searchText="",this.disconnected$=new d,this.handleBack=()=>{new m(this.history).showTrendingPage()},this.onSearchSubmit=s=>{e.dispatch(r(s)),new m(this.history).showSearchPage(s,{replace:!0})}}componentWillLoad(){e.dispatch(r(this.history.location.query.q)),c.pipe(g((s=>s.search)),S(this.disconnected$)).subscribe((s=>{this.videos=s.searchResults,this.suggestions=s.suggestions,this.suggestionsError=s.suggestionsError,this.suggestionsLoading=s.suggestionsLoading,this.searchText=s.searchText}))}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete(),e.dispatch(n(""))}render(){const s=!!this.suggestions.length;return i(t,null,i("header",{class:"search-active"},i(o,{searchText:this.searchText,onCloseClick:()=>e.dispatch(p()),onSearchSubmit:()=>{this.onSearchSubmit(this.searchText)},showSearchbar:!0,onSearchTextChange:s=>e.dispatch(l(s.target.value)),onClickBack:this.handleBack})),s&&i(h,{suggestions:this.suggestions,error:this.suggestionsError,loading:this.suggestionsLoading,onClickSuggesion:this.onSearchSubmit}),this.videos.length&&i(a,{videos:this.videos,isShowingSuggestions:s,onClickVideo:s=>new m(this.history).showVideoPage(s)}))}};k.style=":host{display:block}";export{k as search_page}