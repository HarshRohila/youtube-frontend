import{h as s,r as i,H as e,g as t}from"./p-34631501.js";import{R as a}from"./p-71058f99.js";import{d as n,f as o,c as r,a as c,l,s as d,u as h,e as p,t as u,k as g}from"./p-b682347e.js";import{S as m,m as b}from"./p-4cff571d.js";import"./p-c77353f1.js";const x=Intl.NumberFormat("en",{notation:"compact"});function f({video:i}){const e=[i.uploaderName,x.format(i.views),i.uploadedDate].join(" â€§ ");return s("div",{class:"card"},s("img",{class:"thumbnail",src:i.thumbnail}),s("div",{class:"video-desc"},s("img",{class:"uploader-avatar",src:i.uploaderAvatar}),s("span",null,s("h3",null,i.title),s("p",null,e))))}function v({onSearchSubmit:i,onSearchTextChange:e,onSearchBtnClick:t,searchText:a,showSearchbar:r,onCloseClick:c}){return s("div",{class:"search-bar"},s("form",{class:"search-form "+(r?"":"hide"),onSubmit:s=>{s.preventDefault(),i(s)}},s("input",{type:"text",class:"search-input",value:a,placeholder:"Search",onInput:e})),r&&s("button",{class:"close",onClick:c},s("x-icon",{icon:o})),!r&&s("button",{class:"search",onClick:t},s("x-icon",{icon:n})))}function k({suggestions:i,onClickSuggesion:e,error:t,loading:a}){return s("div",{class:"suggestions-container"},t&&s("div",{class:"error"},t.message),a&&s("div",{class:"loading"},s("x-icon",{icon:r,spin:!0})),s("ul",{class:"suggestions"},!a&&!t&&i.map((i=>s("li",{onClick:()=>e(i)},i)))))}let w=class{constructor(s){i(this,s),this.showSearchbar=!1,this.disconnected$=new m,this.createVideoClickHandler=s=>()=>{new a(this.history).showVideoPage(s)}}componentWillLoad(){c.dispatch(l()),d.pipe(b((s=>s.search)),h(this,"disconnectedCallback")).subscribe((s=>{this.showSearchbar=s.showSearchBar,this.suggestions=s.suggestions,this.searchText=s.searchText,this.videos=s.searchResults,this.suggestionsError=s.suggestionsError,this.suggestionsLoading=s.suggestionsLoading}))}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete()}render(){const i=this.showSearchbar;return s(e,null,s("header",{class:this.showSearchbar?"search-active":""},!this.showSearchbar&&s("h1",null,"PipedRx"),s(v,{searchText:this.searchText,onCloseClick:()=>c.dispatch(u()),onSearchBtnClick:()=>{const s=this.el.querySelector(".search-input");c.dispatch(u()),setTimeout((()=>{s.focus()}),150)},onSearchSubmit:()=>{c.dispatch(p())},showSearchbar:this.showSearchbar,onSearchTextChange:s=>c.dispatch(g(s.target.value))})),i&&s(k,{suggestions:this.suggestions,error:this.suggestionsError,loading:this.suggestionsLoading,onClickSuggesion:s=>{c.dispatch(p(s))}}),s("ul",{class:"trending "+(i?"suggestions-active":"")},this.videos&&this.videos.map((i=>s("li",{onClick:this.createVideoClickHandler(i)},s(f,{video:i}))))))}get el(){return t(this)}};w.style="@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}ul.trending{list-style-type:none;margin:0;padding:0}.card{position:relative;margin-bottom:50px}.card .thumbnail{border-radius:15px;width:100%;aspect-ratio:16/9;background-image:linear-gradient(-45deg, #020024, white, #020024);background-size:400% 400%;animation:gradient 1.5s ease-in-out infinite}.card .video-desc{box-shadow:0px 0px 21px 12px rgb(2, 0, 36);width:100%;position:absolute;background:#020024;bottom:-37px;display:flex;height:50px;align-items:center}.card .video-desc .uploader-avatar{padding:0 10px;border-radius:50%;height:35px;width:35px}.card .video-desc span{width:100px;flex:1;display:block}.card .video-desc h3{margin:0;font-size:1rem;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card .video-desc p{margin:0;font-size:0.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}ul.trending.suggestions-active{filter:blur(45px)}";export{w as trending_page}