import{S as t,a as s,n as e}from"./p-6cf4a597.js";import{S as n}from"./p-4c181b5f.js";import{o as r,b as i,c as u}from"./p-1707b666.js";class o extends n{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const s=super._subscribe(t);return!s.closed&&t.next(this._value),s}getValue(){const{hasError:t,thrownError:s,_value:e}=this;if(t)throw s;return this._throwIfClosed(),e}next(t){super.next(this._value=t)}}const c={now:()=>(c.delegate||Date).now(),delegate:void 0};class h extends t{constructor(t,s){super()}schedule(t,s=0){return this}}const l={setInterval(t,s,...e){const{delegate:n}=l;return(null==n?void 0:n.setInterval)?n.setInterval(t,s,...e):setInterval(t,s,...e)},clearInterval(t){const{delegate:s}=l;return((null==s?void 0:s.clearInterval)||clearInterval)(t)},delegate:void 0};class a{constructor(t,s=a.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,e){return new this.schedulerActionCtor(this,t).schedule(e,s)}}a.now=c.now;const f=new class extends a{constructor(t,s=a.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let e;this._active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,e){for(;t=s.shift();)t.unsubscribe();throw e}}}(class extends h{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var e;if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,s)),this.pending=!0,this.delay=s,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(r,this.id,s),this}requestAsyncId(t,s,e=0){return l.setInterval(t.flush.bind(t,this),e)}recycleAsyncId(t,s,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return s;null!=s&&l.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(t,s);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let e,n=!1;try{this.work(t)}catch(t){n=!0,e=t||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),e}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,s(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}),d=f;function p(t){return t instanceof Date&&!isNaN(t)}function b(t){return r(((s,n)=>{i(t).subscribe(u(n,(()=>n.complete()),e)),!n.closed&&s.subscribe(n)}))}function v(t,s){t[s]&&(t[s].next(),t[s].complete(),t[s]=null)}function w(t){const s=new o(t);return{update(t){let e;e="function"!=typeof t?()=>t:t,s.next({...s.value,...e(s.value)})},get:()=>s.value,asObservable:()=>s.asObservable()}}function y({componentDestroyHandlerName:t}){return function(s){const e={untilDestroyed:e=>e.pipe(function(t,s){return function(e){const r=function(t){return Symbol(`__destroy__${t}`)}(s),i=function(t,s){return t[s]||(t[s]=new n),t[s]}(t,r);return function(t,s,e){const n=t[s],r=e=>{t[s]=e};r((function(){n&&n.apply(this,arguments),v(this,e),r(n)}))}(t,s,r),e.pipe(b(i))}}(s,t)),justSubscribe(...t){t.forEach((t=>{e.untilDestroyed(t).subscribe()}))},subscribe:(t,s)=>t.pipe(e.untilDestroyed).subscribe(s)};return e}}function m(t,{once:s}={once:!1}){const e=new n;return{$:e.asObservable(),handler:function(n){let r;r=t?t(n):n,e.next(r),s&&e.complete()}}}function x({once:t}={once:!1}){return m((()=>{}),{once:t})}export{y as D,x as S,d as a,f as b,p as i,b as t,m as v,w as y}