import{b as t,c as n,i as o,m as s,o as r}from"./p-c0874b44.js";function c(n){return n&&t(n.schedule)}function i(t,n,o,s=0,r=!1){const c=n.schedule((function(){o(),r?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(c),!r)return c}function u(c,i,e=1/0){return t(i)?u(((t,n)=>s(((o,s)=>i(t,o,n,s)))(o(c(t,n)))),e):("number"==typeof i&&(e=i),r(((t,s)=>function(t,s,r,c){const i=[];let u=0,e=0,f=!1;const a=()=>{!f||i.length||u||s.complete()},m=t=>u<c?l(t):i.push(t),l=t=>{u++;let f=!1;o(r(t,e++)).subscribe(n(s,(t=>{s.next(t)}),(()=>{f=!0}),void 0,(()=>{if(f)try{for(u--;i.length&&u<c;){const t=i.shift();l(t)}a()}catch(t){s.error(t)}})))};return t.subscribe(n(s,m,(()=>{f=!0,a()}))),()=>{}}(t,s,c,e))))}export{i as e,c as i,u as m}