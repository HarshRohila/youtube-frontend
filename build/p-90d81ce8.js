function t(t){return"function"==typeof t}function n(t){const n=t((t=>{Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const r=n((t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map(((t,n)=>`${n+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n}));function s(t,n){if(t){const r=t.indexOf(n);0<=r&&t.splice(r,1)}}class i{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:s}=this;if(s)if(this._parentage=null,Array.isArray(s))for(const t of s)t.remove(this);else s.remove(this);const{initialTeardown:i}=this;if(t(i))try{i()}catch(t){n=t instanceof r?t.errors:[t]}const{_finalizers:e}=this;if(e){this._finalizers=null;for(const t of e)try{c(t)}catch(t){n=null!=n?n:[],t instanceof r?n=[...n,...t.errors]:n.push(t)}}if(n)throw new r(n)}}add(t){var n;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof i){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&s(n,t)}remove(t){const{_finalizers:n}=this;n&&s(n,t),t instanceof i&&t._removeParent(this)}}i.EMPTY=(()=>{const t=new i;return t.closed=!0,t})();const e=i.EMPTY;function o(n){return n instanceof i||n&&"closed"in n&&t(n.remove)&&t(n.add)&&t(n.unsubscribe)}function c(n){t(n)?n():n.unsubscribe()}const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h={setTimeout(t,n,...r){const{delegate:s}=h;return(null==s?void 0:s.setTimeout)?s.setTimeout(t,n,...r):setTimeout(t,n,...r)},clearTimeout(t){const{delegate:n}=h;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function a(t){h.setTimeout((()=>{const{onUnhandledError:n}=u;if(!n)throw t;n(t)}))}function l(){}const f=d("C",void 0,void 0);function d(t,n,r){return{kind:t,value:n,error:r}}function p(t){t()}class v extends i{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o(t)&&t.add(this)):this.destination=E}static create(t,n,r){return new w(t,n,r)}next(t){this.isStopped?x(function(t){return d("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?x(d("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?x(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function y(t,n){return b.call(t,n)}class m{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(t){_(t)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(t){_(t)}else _(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(t){_(t)}}}class w extends v{constructor(n,r,s){let i;if(super(),t(n)||!n)i={next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=s?s:void 0};else{let t;this&&u.useDeprecatedNextContext?(t=Object.create(n),t.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&y(n.next,t),error:n.error&&y(n.error,t),complete:n.complete&&y(n.complete,t)}):i=n}this.destination=new m(i)}}function _(t){a(t)}function x(t,n){const{onStoppedNotification:r}=u;r&&h.setTimeout((()=>r(t,n)))}const E={closed:!0,next:l,error:function(t){throw t},complete:l},g="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(t){return t}class O{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new O;return n.source=this,n.operator=t,n}subscribe(n,r,s){const i=(e=n)&&e instanceof v||function(n){return n&&t(n.next)&&t(n.error)&&t(n.complete)}(e)&&o(e)?n:new w(n,r,s);var e;return p((()=>{const{operator:t,source:n}=this;i.add(t?t.call(i,n):n?this._subscribe(i):this._trySubscribe(i))})),i}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=P(n))(((n,r)=>{const s=new w({next:n=>{try{t(n)}catch(t){r(t),s.unsubscribe()}},error:r,complete:n});this.subscribe(s)}))}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[g](){return this}pipe(...t){return(0===(n=t).length?S:1===n.length?n[0]:function(t){return n.reduce(((t,n)=>n(t)),t)})(this);var n}toPromise(t){return new(t=P(t))(((t,n)=>{let r;this.subscribe((t=>r=t),(t=>n(t)),(()=>t(r)))}))}}function P(t){var n;return null!==(n=null!=t?t:u.Promise)&&void 0!==n?n:Promise}O.create=t=>new O(t);export{e as E,O,i as S,s as a,t as b,n as c,w as d,p as e,v as f,S as i,l as n,g as o,a as r}