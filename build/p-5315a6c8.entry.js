import{r as s,h as i,H as t}from"./p-bb4ef53f.js";import{S as a,a as o}from"./p-bdc52ab8.js";import{a as h,e,s as r,g as c,k as n}from"./p-7c95d887.js";import{R as p}from"./p-26258b92.js";import{S as l,m,t as d}from"./p-c0874b44.js";import{V as b}from"./p-ef1712c1.js";import"./p-27f6585c.js";import"./p-6ad30cec.js";import"./p-51a562ba.js";let g=class{constructor(i){s(this,i),this.searchText="",this.disconnected$=new l,this.handleBack=()=>{new p(this.history).showTrendingPage()},this.onSearchSubmit=s=>{h.dispatch(e(s)),new p(this.history).showSearchPage(s,{replace:!0})}}componentWillLoad(){h.dispatch(e(this.history.location.query.q)),r.pipe(m((s=>s.search)),d(this.disconnected$)).subscribe((s=>{this.videos=s.searchResults,this.suggestions=s.suggestions,this.suggestionsError=s.suggestionsError,this.suggestionsLoading=s.suggestionsLoading,this.searchText=s.searchText}))}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete(),h.dispatch(c(""))}render(){const s=!!this.suggestions.length;return i(t,null,i("header",{class:"search-active"},i(o,{searchText:this.searchText,onCloseClick:()=>h.dispatch(c("")),onSearchSubmit:()=>{this.onSearchSubmit(this.searchText)},showSearchbar:!0,onSearchTextChange:s=>h.dispatch(n(s.target.value)),onClickBack:this.handleBack})),s&&i(a,{suggestions:this.suggestions,error:this.suggestionsError,loading:this.suggestionsLoading,onClickSuggesion:this.onSearchSubmit}),this.videos.length&&i(b,{videos:this.videos,isShowingSuggestions:s,onClickVideo:s=>new p(this.history).showVideoPage(s)}))}};g.style=":host{display:block}";export{g as search_page}