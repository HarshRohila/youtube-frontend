import{S as n}from"./p-4c181b5f.js";import{o as t,b as r,c as e}from"./p-1707b666.js";import{n as o}from"./p-6cf4a597.js";class s extends n{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function u(n){return t(((t,s)=>{r(n).subscribe(e(s,(()=>s.complete()),o)),!s.closed&&t.subscribe(s)}))}function c(n,t){n[t]&&(n[t].next(),n[t].complete(),n[t]=null)}function i(n){const t=new s(n);return{update(n){let r;r="function"!=typeof n?()=>n:n,t.next({...t.value,...r(t.value)})},get:()=>t.value,asObservable:()=>t.asObservable()}}function f({componentDestroyHandlerName:t}){return function(r){const e={untilDestroyed:e=>e.pipe(function(t,r){return function(e){const o=function(n){return Symbol(`__destroy__${n}`)}(r),s=function(t,r){return t[r]||(t[r]=new n),t[r]}(t,o);return function(n,t,r){const e=n[t],o=r=>{n[t]=r};o((function(){e&&e.apply(this,arguments),c(this,r),o(e)}))}(t,r,o),e.pipe(u(s))}}(r,t)),justSubscribe(...n){n.forEach((n=>{e.untilDestroyed(n).subscribe()}))},subscribe:(n,t)=>n.pipe(e.untilDestroyed).subscribe(t)};return e}}function a(t,{once:r}={once:!1}){const e=new n;return{$:e.asObservable(),handler:function(n){let o;o=t?t(n):n,e.next(o),r&&e.complete()}}}function l({once:n}={once:!1}){return a((()=>{}),{once:n})}export{f as D,l as S,u as t,a as v,i as y}