import{d as t,c as n,i as o,m as s,o as r}from"./p-5c1a28e4.js";function c(n){return n&&t(n.schedule)}function i(t,n,o,s=0,r=!1){const c=n.schedule((function(){o(),r?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(c),!r)return c}function e(c,i,u=1/0){return t(i)?e(((t,n)=>s(((o,s)=>i(t,o,n,s)))(o(c(t,n)))),u):("number"==typeof i&&(u=i),r(((t,s)=>function(t,s,r,c){const i=[];let e=0,u=0,a=!1;const f=()=>{!a||i.length||e||s.complete()},m=t=>e<c?l(t):i.push(t),l=t=>{e++;let a=!1;o(r(t,u++)).subscribe(n(s,(t=>{s.next(t)}),(()=>{a=!0}),void 0,(()=>{if(a)try{for(e--;i.length&&e<c;){const t=i.shift();l(t)}f()}catch(t){s.error(t)}})))};return t.subscribe(n(s,m,(()=>{a=!0,f()}))),()=>{}}(t,s,c,u))))}export{i as e,c as i,e as m}