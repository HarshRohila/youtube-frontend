import{r as s,h as i,H as t}from"./p-27ce4408.js";import{S as o,a}from"./p-c8b7b009.js";import{a as r,c as e,s as h,d as c,k as p}from"./p-c472acb9.js";import{R as n}from"./p-1a687b83.js";import{S as m}from"./p-c96f589c.js";import{m as l}from"./p-7b8d1737.js";import{t as d}from"./p-0f8eda08.js";import{V as j}from"./p-4325abee.js";import"./p-9a472600.js";import"./p-954d5885.js";import"./p-5304e58c.js";import"./p-2d1a0235.js";import"./p-b44dc71b.js";let b=class{constructor(i){s(this,i),this.searchText="",this.disconnected$=new m,this.handleBack=()=>{new n(this.history).showTrendingPage()},this.onSearchSubmit=s=>{window.scrollTo({top:0}),r.dispatch(e(s)),new n(this.history).showSearchPage(s,{replace:!0})}}componentWillLoad(){r.dispatch(e(this.history.location.query.q)),h.pipe(l((s=>s.search)),d(this.disconnected$)).subscribe((s=>{this.videos=s.searchResponse.results,this.suggestions=s.suggestions,this.suggestionsError=s.suggestionsError,this.suggestionsLoading=s.suggestionsLoading,this.searchText=s.searchText}))}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete(),r.dispatch(c(""))}render(){const s=!!this.suggestions.length;return i(t,null,i("header",{class:"search-active"},i(a,{searchText:this.searchText,onCloseClick:()=>r.dispatch(c("")),onSearchSubmit:()=>{this.onSearchSubmit(this.searchText)},showSearchbar:!0,onSearchTextChange:s=>r.dispatch(p(s.target.value)),onClickBack:this.handleBack})),s&&i(o,{suggestions:this.suggestions,error:this.suggestionsError,loading:this.suggestionsLoading,onClickSuggesion:this.onSearchSubmit}),this.videos.length&&i(j,{videos:this.videos,isShowingSuggestions:s,onClickVideo:s=>new n(this.history).showVideoPage(s)}))}};b.style=":host{display:block}";export{b as search_page}