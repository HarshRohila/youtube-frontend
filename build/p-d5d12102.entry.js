import{r as t,h as s}from"./p-703a61bf.js";import{S as i,a as e,o as n,c as r,i as l,b as h,d as o,e as u,Y as a,t as c,m as d}from"./p-d21c24ce.js";import{R as p}from"./p-55bd9510.js";import"./p-853b575b.js";const f={now:()=>(f.delegate||Date).now(),delegate:void 0};class v extends i{constructor(t,s){super()}schedule(t,s=0){return this}}const x={setInterval(t,s,...i){const{delegate:e}=x;return(null==e?void 0:e.setInterval)?e.setInterval(t,s,...i):setInterval(t,s,...i)},clearInterval(t){const{delegate:s}=x;return((null==s?void 0:s.clearInterval)||clearInterval)(t)},delegate:void 0};class b{constructor(t,s=b.now){this.schedulerActionCtor=t,this.now=s}schedule(t,s=0,i){return new this.schedulerActionCtor(this,t).schedule(i,s)}}b.now=f.now;const g=new class extends b{constructor(t,s=b.now){super(t,s),this.actions=[],this._active=!1}flush(t){const{actions:s}=this;if(this._active)return void s.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,i){for(;t=s.shift();)t.unsubscribe();throw i}}}(class extends v{constructor(t,s){super(t,s),this.scheduler=t,this.work=s,this.pending=!1}schedule(t,s=0){var i;if(this.closed)return this;this.state=t;const e=this.id,n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,s)),this.pending=!0,this.delay=s,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,s),this}requestAsyncId(t,s,i=0){return x.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,s,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return s;null!=s&&x.clearInterval(s)}execute(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,s);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,s){let i,e=!1;try{this.work(t)}catch(t){e=!0,i=t||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:s}=this,{actions:i}=s;this.work=this.state=this.scheduler=null,this.pending=!1,e(i,this),null!=t&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,super.unsubscribe()}}});function m(t,s){return n(((i,e)=>{let n=null,h=0,o=!1;const u=()=>o&&!n&&e.complete();i.subscribe(r(e,(i=>{null==n||n.unsubscribe();let o=0;const a=h++;l(t(i,a)).subscribe(n=r(e,(t=>e.next(s?s(i,t,a,o++):t)),(()=>{n=null,u()})))}),(()=>{o=!0,u()})))}))}let w=class{constructor(s){t(this,s),this.searchText$=new u,this.disconnected$=new u,this.searchSubmit$=new u,this.suggestions=[],this.searchResults=[],this.searchText="",this.showSuggestions=!1,this.onSearchTextChange=t=>{this.searchText$.next(t.target.value)},this.onSearchSubmit=t=>{t.preventDefault(),this.searchSubmit$.next()},this.createVideoClickHandler=t=>()=>{new p(this.history).showVideoPage(t)}}componentWillLoad(){const t=a.getApi();var s;this.searchText$.pipe((s=t=>!!t,n(((t,i)=>{let e=0;t.subscribe(r(i,(t=>s.call(undefined,t,e++)&&i.next(t))))}))),function(t,s,i){const e=o(t)?{next:t,error:s,complete:i}:t;return e?n(((t,s)=>{var i;null===(i=e.subscribe)||void 0===i||i.call(e);let n=!0;t.subscribe(r(s,(t=>{var i;null===(i=e.next)||void 0===i||i.call(e,t),s.next(t)}),(()=>{var t;n=!1,null===(t=e.complete)||void 0===t||t.call(e),s.complete()}),(t=>{var i;n=!1,null===(i=e.error)||void 0===i||i.call(e,t),s.error(t)}),(()=>{var t,s;n&&(null===(t=e.unsubscribe)||void 0===t||t.call(e)),null===(s=e.finalize)||void 0===s||s.call(e)})))})):h}((t=>{this.searchText=t})),function(t,s=g){return n(((i,e)=>{let n=null,l=null,h=null;const o=()=>{if(n){n.unsubscribe(),n=null;const t=l;l=null,e.next(t)}};function u(){const i=h+t,r=s.now();if(r<i)return n=this.schedule(void 0,i-r),void e.add(n);o()}i.subscribe(r(e,(i=>{l=i,h=s.now(),n||(n=s.schedule(u,t),e.add(n))}),(()=>{o(),e.complete()}),void 0,(()=>{l=n=null})))}))}(300),m(t.getSuggestions),c(this.disconnected$)).subscribe((t=>{this.suggestions=t,this.showSuggestions=!0})),this.searchSubmit$.pipe(d((()=>this.searchText)),m(t.getSearchResults),c(this.disconnected$)).subscribe((t=>{this.searchResults=t,this.showSuggestions=!1}))}disconnectedCallback(){this.disconnected$.next(),this.disconnected$.complete()}render(){return s("div",{class:"app-home"},s("div",{class:"search"},s("form",{onSubmit:this.onSearchSubmit},s("input",{type:"search",placeholder:"Search",onInput:this.onSearchTextChange})),this.showSuggestions&&s("ul",{class:"suggestions"},this.suggestions.map((t=>s("li",null,t))))),s("h1",null,"Youtube Search Results"),s("ul",null,this.searchResults.map((t=>s("li",{onClick:this.createVideoClickHandler(t)},s("img",{src:t.thumbnail}))))))}};w.style=".app-home{padding:10px}button{background:#5851ff;color:white;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;box-shadow:0 8px 16px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);outline:0;letter-spacing:0.04em;transition:all 0.15s ease;cursor:pointer}button:hover{box-shadow:0 3px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);transform:translateY(1px)}.search{position:relative}.suggestions{position:absolute;background:white;border:1px solid}";export{w as app_home}